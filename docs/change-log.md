---
id: change-log
title: 更新日志
---

### [如何升级新版本？](/docs/update-version/)

## 2.3.11
`2020-09-29`

国庆节快乐 🎉

- 🌟 关于页面增加新版本提示功能
- 🛠 无权限的操作按钮现已不再显示 #203
- 🛠 优化查看发布申请的刷新机制
- 🛠 更新robots规则提高安全性
- 🐞 修复某些情况下删除条件检查未生效的问题

## 2.3.10
`2020-09-15`

- 🌟 监控中心新增Ping检测类型 #195
- 🌟 监控中心新增执行测试功能 #195
- 🛠 优化主机选择体验
- 🛠 从模版添加命令变更为在当前内容末尾插入而非覆盖
- 🛠 新建发布配置可选主机现已受主机权限影响
- 🛠 配置中心文本配置解析支持包含注释信息
- 🛠 查看处于发布中状态的发布申请将会保持自动刷新
- 🛠 自动更新已超时的发布申请状态为发布异常
- 🐞 修复批量执行大并发场景下可能部分无法完成的问题

## 2.3.9
`2020-08-27`

- 🌟 可以为主机设置独立的密钥 #170
- 🌟 增加文件管理器的功能权限设置 #176
- 🛠 优化发布配置的环境选择自动禁用已存在配置的环境
- 🛠 优化自定义发布申请数据上传体验
- 🐞 修复未同步删除git仓库已删除的分支或tag的问题

注意事项：
- 如果非 `docker` 部署，则需要确保部署 `Spug` 的服务器 git 版本 `2.17.0+`

## 2.3.8
`2020-08-09`

- 🌟 自定义发布的数据传输动作已支持发布时上传数据 #156
- 🌟 配置中心 API 新增 noPrefix=1 查询参数支持无前缀 key
- 🌟 配置中心 API 新增 format=env 支持输出可作为环境变量的配置
- 🌟 新增常规发布全局变量 `SPUG_DST_DIR` #162
- 🛠 优化主机批量导入减少被中断的情况
- 🐞 完善表单校验规则避免特殊情况下造成发布失败的问题

镜像更新：
- `nginx` 配置使用 `try_files` 代替 `error_page`

## 2.3.7
`2020-07-30`

- 🌟 自定义发布新增用于文件分发的数据传输动作
- 🌟 发布配置克隆已支持跨应用克隆
- 🌟 新增查看发布配置功能及相应权限控制
- 🌟 发布申请图表支持选择时间范围统计
- 🌟 批量执行控制台新增全屏功能
- 🛠 完善一些表单配置项的帮助信息
- 🛠 优化应用管理页面的发布配置展开操作体验
- 🛠 优化图表提示信息
- 🐞 修复发布过程中切换页面可能会引起页面异常的问题
- 🐞 修复发布申请页其他状态计数未正常更新问题

镜像安全性更新：
- 不再显示 `nginx` 版本号
- 添加请求头 `X-Frame-Options`

## 2.3.6
`2020-07-18`

- 🌟 发布申请的审核动态已支持消息通知
- 🛠 优化对中文输出内容的支持
- 🛠 改进发布稳定性
- 🛠 通知发送异常情况将会反馈至系统通知
- 🛠 启用账户将自动清除连续错误计数
- 🐞 修复邮件配置测试某些情况下报错的问题
- 🐞 修复当在 `windows` 上运行时文件管理器上传路径错误的问题
- 🐞 修复自定义发布编辑后无法正常发布的问题
- 🐞 修复编辑账户可能会出现同名账户的问题


## 2.3.5
`2020-07-05`

- 🛠 优化批量执行页面性能
- 🛠 优化发布页面在输出大量日志时的性能
- 🛠 添加 `updatedb` 命令代替 `initdb`
- 🛠 优化读取发布日志性能
- 🛠 优化监控告警描述信息
- 🐞 修复常规发布申请 Tag 过滤异常的问题 #137
- 🐞 修复文件管理器上传/下载后无法自动刷新的问题
- 🐞 修复过滤条件在页面切换后未正常显示的问题

## 2.3.4
`2020-06-26`

🎉 端午节快乐 😄
- 🌟 新增应用发布全局变量 `SPUG_REPO_DIR`
- 🌟 应用发布结果通知增加申请标题信息 #130 
- 🌟 应用管理添加描述信息过滤 #130 
- 🛠 优化发布配置删除将自动删除关联数据文件
- 🛠 优化主机验证规则避免验证成功但无法连接的问题
- 🐞 修复文件管理器访问无权限目录时路径显示错误的问题
- 🐞 修复多主机发布时页面异常的问题 #133
- 🐞 修复主机执行的发布操作环境变量异常的问题 #134

## 2.3.3
`2020-06-15`

- 🌟 任务计划Cron新增实时显示预估执行时间特性
- 🌟 发布详情页日志现已支持自动滚动
- 🌟 任务计划新增执行失败钉钉/企业微信通知代替系统通知
- 🛠 报警趋势图修改为平滑折线
- 🛠 优化表格支持部分字段排序
- 🛠 优化表格分页支持调整pageSize
- 🛠 优化批量导入规则不允许主机名相同
- 🛠 优化发布配置表单数据录入及校验规则
- 🐞 修复主机批量导入某些情况下错误使用默认密码的问题 #124
- 🐞 修复普通用户创建应用或环境某些情况下失败的问题

## 2.3.2

`2020-06-11`
- 🌟 监控中心现已支持企业微信告警
- 🌟 任务计划增加立即执行测试功能
- 🌟 新增常规发布全局变量 `SPUG_GIT_BRANCH`,`SPUG_GIT_COMMIT_ID`,`SPUG_GIT_TAG` [文档](/docs/deploy-config/#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F)
- 🛠 优化常规发布目录已存在时的提示信息
- 🛠 优化发布时服务侧执行的动作或命令的环境变量
- 🛠 优化发布结果通知多主机时的展示效果
- 🛠 优化主机权限在任务计划和监控中心模块的表现
- 🐞 修复某些情况下保留历史版本不正确的问题

## 2.3.1

`2020-06-03`
- 🌟 常规发布git clone将使用设置的密钥作为备选密钥
- 🛠 优化主机选择支持搜索匹配
- 🛠 更新paramiko版本以支持新的密钥格式
- 🛠 优化任务计划Cron触发器的周保持与crontab一致
- 🛠 优化任务计划页面上可以得到更多错误信息
- 🐞 修复user add命令-s参数与文档不一致的问题
- 🐞 修复update升级未正常更新表结构的问题

## 2.3.0

`2020-05-31`
- 🌟 新增主机文件管理器功能
- 🌟 新增主机批量导入功能
- 🌟 新增上传自定义密钥对功能
- 🌟 任务计划新增执行历史查看功能
- 🌟 发布申请批量删除现已支持按保留数量删除
- 🌟 角色管理新增主机权限控制功能
- 🌟 主机编辑新增修改类别功能
- 🛠 改进webssh安全性
- 🛠 优化发布申请Tag排序及展示
- 🛠 优化批量执行页面可以得到更多错误反馈和样式改进
- 🐞 修复自定义发布在无主机动作时发布状态未正常更新的问题
- 🐞 修复发布全局变量SPUG_HOST_ID和SPUG_HOST_NAME某些情况下未正确赋值的问题

注意事项：
- `v2.3.0` 改进了常规发布的回滚机制，在回滚发布时将仅执行`应用发布前`和`应用发布后`钩子脚本，并使用主机上存储的历史版本。
- `v2.3.0` 新增了主机权限管理功能，从`v2.2.x`升级后普通用户（管理员不受权限影响）将无法在主机管理和批量执行模块看到主机，请在角色管理的主机权限中对角色进行授权。

## 2.2.6

`2020-05-18`
- 🌟 发布申请现已支持批量删除
- 🌟 任务计划添加Cron触发器支持
- 🌟 添加manage.py user命令实现创建/启用/重置账户功能
- 🌟 新建发布申请选择应用支持过滤
- 🌟 自定义邮件服务添加在线测试
- 🌟 添加关于页面web版本号显示
- 🛠 优化发布权限(自己创建的环境/应用自动具有对应的发布权限)
- 🛠 优化主机录入自动移除多余空格
- 🛠 优化工作台应用部署图表百分比显示
- 🛠 支持非SSL的邮件服务
- 🐞 修复主机信息无法编辑的问题
- 🐞 修复可能会出现同名账户的问题
- 🐞 修复某些情况下发布权限页获取不到新创建的应用的问题

## 2.2.5

`2020-05-05`
- 🌟 新增 `manage.py update` 用于快速升级 `spug` 版本
- 🌟 发布结果通知添加企业微信支持
- 🌟 添加主机管理连接地址搜索项 [#61](https://github.com/openspug/spug/issues/61)
- 🛠 前端build不再产生 `sourcemap` 文件
- 🛠 告警信息现在会展示更多内容
- 🛠 侧边导航超出窗口高度自动滚动
- 🐞 修复故障恢复告警可能错误发出的问题
- 🐞 修复角色管理功能权限某些情况下显示错误的问题
- 🐞 修复可能会出现同名账户引起登录问题
- 🐞 修复发布申请表单校验不严谨的问题
- 🐞 修复钉钉告警错误的提示需要设置调用凭据的问题

## 2.2.4

`2020-04-20`
- 🌟 新建发布申请支持搜索Branch/Tag
- 🌟 主机选择添加全选/反选功能
- 🌟 发布结果通知添加主机信息
- 🛠 新建常规发布申请默认最近一次发布所选择的分支
- 🛠 优化主机字段标题展示
- 🛠 优化发布申请列表筛选条件
- 🛠 优化主机删除前置条件检查
- 🐞 修复未分配应用权限时某些接口报错的问题
- 🐞 修复钉钉告警联系人过滤规则错误的问题
- 🐞 修复已删除用户所关联的角色无法被删除的问题

## 2.2.3

`2020-04-07`
- 🛠 优化创建发布申请应用名称过长时气泡显示完整名称
- 🛠 发布添加`SPUG_DEPLOY_ID`,`SPUG_HOST_ID`,`SPUG_HOST_NAME`全局变量 [文档](/docs/deploy-config/#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F)
- 🐞 修复某些错误未能正常反馈到发布详情页的问题

## 2.2.2

`2020-04-01`
- 🌟 发布日志查看添加刷新功能
- 🛠 优化报警服务异常通知及表单提示
- 🐞 修复发布日志记录可能不完整的问题 [#46](https://github.com/openspug/spug/issues/46)
- 🐞 修复使用自定义邮件服务仍然会提示输入访问凭据的问题

## 2.2.1

`2020-03-30`
- 🛠 优化删除环境提示信息
- 🛠 应用发布中状态可查看日志
- 🛠 ldap账户不再允许被删除，可使用禁用功能代替 [#42](https://github.com/openspug/spug/issues/42)
- 🐞 修复报警联系组删除问题 [#43](https://github.com/openspug/spug/issues/43)
- 🐞 修复无可用环境的情况下编辑配置时报错的问题
- 🐞 修复系统设置中报警服务保存可能报错的问题

## 2.2.0

`2020-03-20`
- 🌟 添加应用发布日志查看功能
- 🌟 添加LDAP登录支持
- 🌟 添加系统设置-关于页面
- 🛠 自动移除命令中换行包含的`\r`字符
- 🛠 优化LDAP未配置时登录的提示信息
- 🛠 角色管理新增关联账户数量展示
- 🐞 修复已删除用户可以登录的问题
- 🐞 修复登录接口兼容性
- 🐞 修复导航栏某些情况下未按预期展示的问题
- 🐞 修复某些情况下账户编辑角色列表未正常显示的问题
- 🐞 修复执行发布可能意外报错的问题

## 2.1.1

`2020-03-08`
- 🌟 添加监控中心任务类型过滤功能
- 🌟 常规发布配置支持全屏编写命令
- 🐞 修复工作台统计主机数量不正确的问题
- 🐞 修复通知未读数量错误计算的问题
- 🐞 修复监控中心禁用启用描述错误的问题
- 🐞 修复常规发布更改Git仓库配置不生效的问题

## 2.1.0

`2020-02-25`

- 🌟 新增了发布结果通知功能
- 🐞 优化主机/模版选择弹窗显示
- 🐞 修复GitPython依赖包更新导致的问题
- 🐞 修复DeployRequest对象的问题
- 🐞 修复macOS主机常规发布报错的问题


## 2.0.0

`2020-01-30`

🎉2.0 发布了，全新的基于 ant.design 的美观 UI，欢迎 预览体验 ，如需帮助请访问 官方文档。


## 2.0.0-beta.1

`2020-01-19`

- 🌟 主机管理
- 🌟 批量执行
- 🌟 应用发布
- 🌟 配置中心
- 🌟 任务调度
- 🌟 监控中心
- 🌟 报警中心
